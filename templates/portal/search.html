{% extends 'base.html' %}
{% block title %}Search{% if search_query %}: {{ search_query }}{% endif %} â€” {{ node_name }}{% endblock %}

{% block content %}
<div class="page-header">
  <h1 class="page-title">
    {% if search_query %}Results for "{{ search_query }}"{% else %}Search{% endif %}
  </h1>
  {% if search_query and items %}
  <p class="page-sub">{{ items|length }} result{{ items|length|pluralize }}</p>
  {% endif %}
</div>

{% if items %}
<div class="item-grid">
  {% for item in items %}
  <a href="{% url 'portal:item_detail' item.pk %}" class="item-card">
    <div class="item-thumb">
      {% if item.thumbnail %}<img src="{{ item.thumbnail.url }}" alt="{{ item.title }}" loading="lazy">
      {% else %}
      <div class="item-thumb-placeholder">
        {% if item.file_type == 'video' %}ğŸ¬{% elif item.file_type == 'audio' %}ğŸµ{% elif item.file_type == 'document' %}ğŸ“„{% else %}ğŸ“{% endif %}
      </div>{% endif %}
      <div class="item-type-badge {{ item.file_type }}">{{ item.get_file_type_display }}</div>
    </div>
    <div class="item-info">
      <div class="item-title">{{ item.title }}</div>
      <div class="item-meta">{{ item.category.icon }} {{ item.category.name }} &bull; {{ item.formatted_size }}</div>
    </div>
  </a>
  {% endfor %}
</div>
{% elif search_query %}
<div class="empty-state">
  <div class="empty-icon">ğŸ”</div>
  <p>No results for "{{ search_query }}"</p>
</div>
{% else %}
<div class="empty-state">
  <div class="empty-icon">ğŸ”</div>
  <p>Type something to search</p>
</div>
{% endif %}
{% endblock %}
